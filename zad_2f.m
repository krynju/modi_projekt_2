global u;
global w_fun;
w_fun=[-0.000795882035660658;0.695119713140403;0.0125201391571986;-0.00614176131946474;-0.00270813613030106;0.00192329379579466;-0.0209316616603090;0.00190446551814646;0.0203911958568896;0.458997259860770;-0.00271993201211977;0.0172671082854799;0.0360794863601983;-0.0102224326948757;0.00915858781191190;-0.00426144063062974;0.0242941990632014;0.145775292361434;0.0430261812826967;-0.0172122208584079;0.0152301727861086;0.0121189796752271;-0.0526574109215465;0.00232201083324843;0.0134203550110103;-0.352164897078220;0.0148496023463810;0.00595321349286153;0.0155422508237420;-0.00390240691659254;-0.0216048363190095;6.42767736633972e-05];
j=1;
for i=-1:0.001:1
    u=i;
    y(j)=fsolve(@zad_2f_fun,0,optimoptions('fsolve','Display','off'));
    j=j+1;
end
hold on
plot([-1:0.001:1],y)
grid on
grid minor
xlabel('u')
ylabel('y(u)')
title('Statyczny model nieliniowy')


function [F] = zad_2f_fun(y)
global u;
global w_fun;
for i=1:4
    if i==1
        M = [u y];
        for j=2:4 %stopien
            M = [M power(u,j) power(y,j)];
        end
    else
        for j=1:4 %stopien
            M = [M power(u,j) power(y,j)];
        end
    end
end
F= M*w_fun - y;
end